resource "proxmox_vm_qemu" "gitlab" {
  name        = "gitlab"
  vmid        = "106"
  target_node = "pve"

  agent    = 1
  cores    = 4
  sockets  = 1
  memory   = 4096

  boot = "order=ide2;scsi0;net0"

  network {
    model   = "virtio"
    bridge  = "vmbr0"
    firewall = true
  }

  disk {
    type     = "disk"
    storage  = "local-lvm"
    size     = "64G"
    slot     = "scsi0" 
  }

  onboot = true
}

output "gitlab_ip" {
  value = split("/", var.gitlab_ip)[0]
}
